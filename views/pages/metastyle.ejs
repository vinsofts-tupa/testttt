<base href="/">

<script>
  var urlbase = window.location.origin;
     var basenow = window.location.href;
     console.log("urlbase",urlbase)
     console.log("basenow",basenow)
     function loadjscssfile(filename, filetype){
     if (filetype=="js"){ //if filename is a external JavaScript file
          var fileref=document.createElement('script')
          fileref.setAttribute("type","text/javascript")
          fileref.setAttribute("src", urlbase+"/"+filename)
     }
     else if (filetype=="css"){ //if filename is an external CSS file
          var fileref=document.createElement("link")
          fileref.setAttribute("rel", "stylesheet")
          fileref.setAttribute("type", "text/css")
          fileref.setAttribute("href", urlbase+"/"+filename)
     }
     if (typeof fileref!="undefined")
          document.getElementsByTagName("head")[0].appendChild(fileref)
     }


     loadjscssfile("lib/css/bootstrap.min.css", "css")
     loadjscssfile("lib/css/font-awesome.min.css", "css")
     loadjscssfile("lib/css/animate.min.css", "css")
     loadjscssfile("lib/css/bootstrap-switch.min.css", "css")
     loadjscssfile("lib/css/jquery.dataTables.min.css", "css")
     loadjscssfile("lib/css/select2.min.css", "css")
     loadjscssfile("css/style.css", "css")
     loadjscssfile("css/themes/flat-blue.css", "css")
     loadjscssfile("js/web3.min.js", "js")
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Fonts -->
<link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:300,400' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,900' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="lib/js/jquery.min.js"></script>

<script>

  var data5 = '0x608060405260078054600160a060020a0319169055600b805461ffff191690553480156200002c57600080fd5b506040516200190b3803806200190b833981018060405262000052919081019062000305565b6200006b33868686868664010000000062000076810204565b505050505062000445565b62000080620001ab565b600160a060020a038088166000908152602081905260409020541615620000a657600080fd5b506040805160c081018252600160a060020a0388811680835260208084018a81528486018a905263ffffffff8916606086015260ff8881166080870152871660a086015260009283528282529490912083518154600160a060020a03191693169290921782559251805192938493620001269260018501920190620001e1565b506040820151805162000144916002840191602090910190620001e1565b5060608201516003919091018054608084015160a09094015163ffffffff1990911663ffffffff9093169290921764ff00000000191664010000000060ff948516021765ff0000000000191665010000000000939092169290920217905550505050505050565b6040805160c08101825260008082526060602083018190529282018390529181018290526080810182905260a081019190915290565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200022457805160ff191683800117855562000254565b8280016001018555821562000254579182015b828111156200025457825182559160200191906001019062000237565b506200026292915062000266565b5090565b6200028391905b808211156200026257600081556001016200026d565b90565b6000601f820183136200029857600080fd5b8151620002af620002a982620003db565b620003b4565b91508082526020830160208301858383011115620002cc57600080fd5b620002d983828462000412565b50505092915050565b6000620002f0825162000403565b9392505050565b6000620002f082516200040c565b600080600080600060a086880312156200031e57600080fd5b85516001604060020a038111156200033557600080fd5b620003438882890162000286565b95505060208601516001604060020a038111156200036057600080fd5b6200036e8882890162000286565b94505060406200038188828901620002e2565b93505060606200039488828901620002f7565b9250506080620003a788828901620002f7565b9150509295509295909350565b6040518181016001604060020a0381118282101715620003d357600080fd5b604052919050565b60006001604060020a03821115620003f257600080fd5b506020601f91909101601f19160190565b63ffffffff1690565b60ff1690565b60005b838110156200042f57818101518382015260200162000415565b838111156200043f576000848401525b50505050565b6114b680620004556000396000f3006080604052600436106100985763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416630d9bb52a811461009d5780632e5113b7146100ce5780633a7ff964146100f257806359f5e0ce1461011f5780637088bd1414610141578063aefb643f1461016e578063b4eed7f91461018e578063d206098e146101ae578063eb48e53c146101d0575b600080fd5b3480156100a957600080fd5b506100b26101f0565b6040516100c5979695949392919061134a565b60405180910390f35b3480156100da57600080fd5b506100e361034b565b6040516100c5939291906112ce565b3480156100fe57600080fd5b5061011261010d366004610fdc565b610367565b6040516100c591906112f6565b34801561012b57600080fd5b5061013f61013a3660046110b9565b61063e565b005b34801561014d57600080fd5b5061016161015c366004610fdc565b6106f7565b6040516100c5919061132b565b34801561017a57600080fd5b5061013f610189366004611123565b6108c9565b34801561019a57600080fd5b5061013f6101a9366004611002565b610a4b565b3480156101ba57600080fd5b506101c3610af0565b6040516100c5919061131d565b3480156101dc57600080fd5b5061013f6101eb3660046110b9565b610b41565b600180546002805460035460045460058054604080516020610100848c1615026000190190931697909704601f810183900483028801830190915280875267ffffffffffffffff808916996801000000000000000090990416979596600160a060020a039586169695909416949392918301828280156102b15780601f10610286576101008083540402835291602001916102b1565b820191906000526020600020905b81548152906001019060200180831161029457829003601f168201915b5050505060058301805460408051602060026001851615610100026000190190941693909304601f81018490048402820184019092528181529495949350908301828280156103415780601f1061031657610100808354040283529160200191610341565b820191906000526020600020905b81548152906001019060200180831161032457829003601f168201915b5050505050905087565b600854600954600a54600160a060020a03928316929091169083565b6060610371610d2e565b6001546040517f70da4f0e000000000000000000000000000000000000000000000000000000008152600160a060020a038516916370da4f0e916103ce9168010000000000000000900467ffffffffffffffff169060040161133c565b600060405180830381600087803b1580156103e857600080fd5b505af11580156103fc573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261042491908101906110ee565b9050806060015160ff166000148015610448575060015467ffffffffffffffff1642105b15610517576040805160608181018352600354600160a060020a0390811680845260045490911660208085018290526002549486018590526008805473ffffffffffffffffffffffffffffffffffffffff19908116909417905560098054909316909117909155600a9290925582519081018352602781527f42757965722063616e20776974682064726177206d6f6e65792066726f6d2045918101919091527f6d706c6f79657200000000000000000000000000000000000000000000000000918101919091529150610638565b60015467ffffffffffffffff164211801561053a5750605a816060015160ff1610155b15610601576040805160608181018352600354600160a060020a031680835260208084018290526002549385018490526008805473ffffffffffffffffffffffffffffffffffffffff19908116841790915560098054909116909217909155600a9290925582519081018352602a81527f456d706c6f7965722063616e20776974682064726177206d6f6e65792066726f918101919091527f6d20436f6e747261637400000000000000000000000000000000000000000000918101919091529150610638565b60408051808201909152601181527f446f6e7420646f20736f6d657468696e67000000000000000000000000000000602082015291505b50919050565b33600081815260208190526040902054600160a060020a03169081146106825760405160e560020a62461bcd02815260040161067990611307565b60405180910390fd5b600b5460ff16158061069c5750600b54610100900460ff16155b15156106a757600080fd5b3360009081526020819052604090206003015465010000000000900460ff166002146106d257600080fd5b81516106e5906006906020850190610d5e565b5050600b805460ff1916600117905550565b6106ff610ddc565b33600081815260208190526040902054600160a060020a031690811461073a5760405160e560020a62461bcd02815260040161067990611307565b600160a060020a0383811660009081526020818152604091829020825160c08101845281549094168452600180820180548551600261010094831615949094026000190190911692909204601f81018590048502830185019095528482529193858401939192918301828280156107f25780601f106107c7576101008083540402835291602001916107f2565b820191906000526020600020905b8154815290600101906020018083116107d557829003601f168201915b5050509183525050600282810180546040805160206001841615610100026000190190931694909404601f810183900483028501830190915280845293810193908301828280156108845780601f1061085957610100808354040283529160200191610884565b820191906000526020600020905b81548152906001019060200180831161086757829003601f168201915b50505091835250506003919091015463ffffffff8116602083015260ff6401000000008204811660408401526501000000000090910416606090910152915050919050565b33600081815260208190526040902054600160a060020a03169081146109045760405160e560020a62461bcd02815260040161067990611307565b600b5460ff1615801561091f5750600b54610100900460ff16155b151561092a57600080fd5b6040805160e08101825267ffffffffffffffff80871682528481166020808401918252838501888152336060860190815260006080870181815288518086018a5282815260a089019081528951808701909a5291895260c08801989098528651600180549651881668010000000000000000026fffffffffffffffff0000000000000000199290981667ffffffffffffffff19909716969096171695909517845590516002555160038054600160a060020a0392831673ffffffffffffffffffffffffffffffffffffffff1991821617909155955160048054919092169616959095179094559051805192939192610a26926005920190610d5e565b5060c08201518051610a42916005840191602090910190610d5e565b50505050505050565b33600081815260208190526040902054600160a060020a0316908114610a865760405160e560020a62461bcd02815260040161067990611307565b600b5460ff16158015610aa15750600b54610100900460ff16155b1515610aac57600080fd5b610aba878787878787610bf3565b50506004805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a03969096169590951790945550505050565b610af8610e12565b600754600160a060020a03163314610b0f57600080fd5b5060408051606081018252600854600160a060020a039081168252600954166020820152600a54918101919091525b90565b33600081815260208190526040902054600160a060020a0316908114610b7c5760405160e560020a62461bcd02815260040161067990611307565b600b5460ff161580610b965750600b54610100900460ff16155b1515610ba157600080fd5b3360009081526020819052604090206003015465010000000000900460ff16600114610bcc57600080fd5b8151610bdf906005906020850190610d5e565b5050600b805461ff00191661010017905550565b610bfb610ddc565b600160a060020a038088166000908152602081905260409020541615610c2057600080fd5b506040805160c081018252600160a060020a0388811680835260208084018a81528486018a905263ffffffff8916606086015260ff8881166080870152871660a08601526000928352828252949091208351815473ffffffffffffffffffffffffffffffffffffffff191693169290921782559251805192938493610cab9260018501920190610d5e565b5060408201518051610cc7916002840191602090910190610d5e565b5060608201516003919091018054608084015160a09094015163ffffffff1990911663ffffffff9093169290921764ff00000000191664010000000060ff948516021765ff0000000000191665010000000000939092169290920217905550505050505050565b6040805160a081018252600080825260208201819052918101829052606080820192909252608081019190915290565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610d9f57805160ff1916838001178555610dcc565b82800160010185558215610dcc579182015b82811115610dcc578251825591602001919060010190610db1565b50610dd8929150610e32565b5090565b6040805160c08101825260008082526060602083018190529282018390529181018290526080810182905260a081019190915290565b604080516060810182526000808252602082018190529181019190915290565b610b3e91905b80821115610dd85760008155600101610e38565b6000610e588235611412565b9392505050565b6000601f82018313610e7057600080fd5b8151610e83610e7e826113e6565b6113bf565b91508082526020830160208301858383011115610e9f57600080fd5b610eaa838284611446565b50505092915050565b6000601f82018313610ec457600080fd5b8135610ed2610e7e826113e6565b91508082526020830160208301858383011115610eee57600080fd5b610eaa83828461143a565b600060a08284031215610f0b57600080fd5b610f1560a06113bf565b90506000610f238484610fb8565b8252506020610f3484848301610fb8565b6020830152506040610f4884828501610fb8565b6040830152506060610f5c84828501610fd0565b606083015250608082015167ffffffffffffffff811115610f7c57600080fd5b610f8884828501610e5f565b60808301525092915050565b6000610e588235610b3e565b6000610e58823561141e565b6000610e588235611427565b6000610e588251611427565b6000610e588235611434565b6000610e588251611434565b600060208284031215610fee57600080fd5b6000610ffa8484610e4c565b949350505050565b60008060008060008060c0878903121561101b57600080fd5b60006110278989610e4c565b965050602087013567ffffffffffffffff81111561104457600080fd5b61105089828a01610eb3565b955050604087013567ffffffffffffffff81111561106d57600080fd5b61107989828a01610eb3565b945050606061108a89828a01610fa0565b935050608061109b89828a01610fc4565b92505060a06110ac89828a01610fc4565b9150509295509295509295565b6000602082840312156110cb57600080fd5b813567ffffffffffffffff8111156110e257600080fd5b610ffa84828501610eb3565b60006020828403121561110057600080fd5b815167ffffffffffffffff81111561111757600080fd5b610ffa84828501610ef9565b60008060006060848603121561113857600080fd5b60006111448686610fac565b935050602061115586828701610f94565b925050604061116686828701610fac565b9150509250925092565b61117981611412565b82525050565b600061118a8261140e565b80845261119e816020860160208601611446565b6111a781611472565b9093016020019392505050565b601181527f5065726d697373696f6e2064656e696564000000000000000000000000000000602082015260400190565b805160608301906111f58482611170565b5060208201516112086020850182611170565b50604082015161121b60408501826112aa565b50505050565b805160009060c08401906112358582611170565b506020830151848203602086015261124d828261117f565b91505060408301518482036040860152611267828261117f565b915050606083015161127c60608601826112b3565b50608083015161128f60808601826112c5565b5060a08301516112a260a08601826112c5565b509392505050565b61117981610b3e565b6111798161141e565b61117981611427565b61117981611434565b606081016112dc8286611170565b6112e96020830185611170565b610ffa60408301846112aa565b60208082528101610e58818461117f565b60208082528101611317816111b4565b92915050565b6060810161131782846111e4565b60208082528101610e588184611221565b6020810161131782846112bc565b60e08101611358828a6112bc565b61136560208301896112bc565b61137260408301886112aa565b61137f6060830187611170565b61138c6080830186611170565b81810360a083015261139e818561117f565b905081810360c08301526113b2818461117f565b9998505050505050505050565b60405181810167ffffffffffffffff811182821017156113de57600080fd5b604052919050565b600067ffffffffffffffff8211156113fd57600080fd5b506020601f91909101601f19160190565b5190565b600160a060020a031690565b63ffffffff1690565b67ffffffffffffffff1690565b60ff1690565b82818337506000910152565b60005b83811015611461578181015183820152602001611449565b8381111561121b5750506000910152565b601f01601f1916905600a265627a7a72305820b1baf65c669f44d4185e8ecf0d5f388e5ede3ca347d2da892278dd80cbc452b56c6578706572696d656e74616cf50037';

  var addressContract2 = '0x65ffdedb75181d02c28ee07fc535f9d24ae4f7b1'
  var addressContract3 = localStorage.getItem('addressContract3');
  var addressContract4 = '0x66d29b3aeba9c3e358aa19f1f78b5014ead4aa7d'

  var contract2 = null;
  var contract3 = null;
  var contract4 = null;
  var contract5 = null;


  // 2 product , 3 bank, 4 Ledger,5 Warranty
  
  var abi2 = [{"constant":true,"inputs":[{"name":"_id","type":"uint64"}],"name":"productsDetail","outputs":[{"components":[{"name":"id","type":"uint64"},{"name":"MFG","type":"uint64"},{"name":"EXP","type":"uint64"},{"name":"state","type":"uint8"},{"name":"name","type":"string"}],"name":"","type":"tuple"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_id","type":"uint64"},{"name":"_MFG","type":"uint64"},{"name":"_EXP","type":"uint64"},{"name":"_state","type":"uint8"},{"name":"_name","type":"string"}],"name":"createProduct","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getAllProduct","outputs":[{"components":[{"name":"id","type":"uint64"},{"name":"MFG","type":"uint64"},{"name":"EXP","type":"uint64"},{"name":"state","type":"uint8"},{"name":"name","type":"string"}],"name":"","type":"tuple[]"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"}];
  var abi3 = [];
  var abi4 = [{"constant":false,"inputs":[{"name":"_warranty","type":"address"}],"name":"saveHistory","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getHistory","outputs":[{"components":[{"name":"Warranty","type":"address"}],"name":"","type":"tuple[]"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"}];
  var abi5 = [{"constant":true,"inputs":[],"name":"convention","outputs":[{"name":"expireTime","type":"uint64"},{"name":"idProduct","type":"uint64"},{"name":"compensation","type":"uint256"},{"name":"employer","type":"address"},{"name":"buyer","type":"address"},{"name":"signatureEmployer","type":"string"},{"name":"signatureBuyer","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"benefit","outputs":[{"name":"sender","type":"address"},{"name":"receiver","type":"address"},{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_productsContract","type":"address"}],"name":"courts","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_signatureBuyer","type":"string"}],"name":"purchase","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"detailAccount","outputs":[{"components":[{"name":"owner","type":"address"},{"name":"name","type":"string"},{"name":"homeAddr","type":"string"},{"name":"phoneNumber","type":"uint32"},{"name":"age","type":"uint8"},{"name":"Type","type":"uint8"}],"name":"","type":"tuple"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_expireTime","type":"uint64"},{"name":"_compensation","type":"uint256"},{"name":"_idProduct","type":"uint64"}],"name":"initWarranty","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_buyer","type":"address"},{"name":"_userName","type":"string"},{"name":"_homeAddr","type":"string"},{"name":"_phoneNumber","type":"uint32"},{"name":"_age","type":"uint8"},{"name":"_Type","type":"uint8"}],"name":"createParnter","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getBenefit","outputs":[{"components":[{"name":"sender","type":"address"},{"name":"receiver","type":"address"},{"name":"balance","type":"uint256"}],"name":"","type":"tuple"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_signatureEmployer","type":"string"}],"name":"sell","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"_userName","type":"string"},{"name":"_homeAddr","type":"string"},{"name":"_phoneNumber","type":"uint32"},{"name":"_age","type":"uint8"},{"name":"_Type","type":"uint8"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"}];

  // if(!addressContract1 || !addressContract2 || !addressContract3 || !addressContract4){
  //      $.ajax({
  //      type: "GET",
  //      url: "getaddresscontract"
  //      }).done((data)=>{
  //           if(data.status){
  //                addressContract1 = data.data.address[0];
  //                localStorage.setItem('addressContract1',addressContract1);
  //                localStorage.setItem('addressContract2',addressContract2);
  //                localStorage.setItem('addressContract3',addressContract3);
  //                localStorage.setItem('addressContract4',addressContract4);
  //           }
  //      });
  // }

  window.addEventListener('load', function () {
    console.log("Contract product:", addressContract2)
    console.log("Contract bank:", addressContract3)
    console.log("Contract Ledger:", addressContract4)
    if (typeof web3 !== 'undefined') {
      // Use Mist/MetaMask's provider
      web3 = new Web3(web3.currentProvider);
    } else {
      web3 = new Web3(new Web3.providers.HttpProvider("https://ropsten.infura.io/v3/79cbd8b8559f4ec1a9bbd610a8952077"));
    }
    contract2 = new web3.eth.Contract(abi2, addressContract2);
    contract3 = new web3.eth.Contract(abi3, addressContract3);
    contract4 = new web3.eth.Contract(abi4, addressContract4);
    contract5abi = new web3.eth.Contract(abi5);
  })
</script>